publish-npm:
  needs: build
  runs-on: ubuntu-latest
  permissions:
    contents: read
    id-token: write # 必须开启
  steps:
    - uses: actions/checkout@v4
    - uses: pnpm/action-setup@v4
      with:
        version: 9
    - uses: actions/setup-node@v4
      with:
        node-version: 20
        registry-url: https://registry.npmjs.org/
        always-auth: true

    - run: pnpm install --frozen-lockfile
    - run: pnpm run build

    - name: Publish to npm
      run: npm publish --access public
